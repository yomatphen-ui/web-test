import React, { useState } from 'react';
import { ShoppingCart, Shield, Zap, Lock, X, Plus, Minus, Star, CheckCircle, User, ChevronLeft, ChevronRight } from 'lucide-react';

export default function Marga2HighStore() {
  const [cart, setCart] = useState([]);
  const [showCart, setShowCart] = useState(false);
  const [showCheckout, setShowCheckout] = useState(false);
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [selectedDuration, setSelectedDuration] = useState(null);
  const [currentScreenshot, setCurrentScreenshot] = useState(0);

  const products = [
    {
      id: 1,
      name: "Valorant Internal",
      game: "VALORANT INTERNAL",
      price: 150000,
      image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400&h=250&fit=crop",
      badge: "Instant Delivery",
      rating: 4.9,
      description: "Precision, performance, and complete control. Jinx Internal delivers pro-level aimbot and ESP features while staying fully undetected, and secure. Built for legit play or full rage, optimized for maximum FPS.",
      screenshots: [
        "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=800&h=450&fit=crop",
        "https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=800&h=450&fit=crop",
        "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop"
      ],
      durations: [
        { label: "1 Day", desc: "[1 Day License To Valorant Internal]", days: 1, price: 50000 },
        { label: "1 Week", desc: "[7 Days License To Valorant Internal]", days: 7, price: 150000 },
        { label: "1 Month", desc: "[31 Day License To Valorant Internal]", days: 30, price: 400000 },
        { label: "Lifetime", desc: "[Lifetime License To Valorant Internal]", days: 999, price: 1200000, disabled: true }
      ],
      features: {
        benefits: [
          "‚úì Undetected & Stable ‚Äî Battle-tested every update",
          "‚úì Windows 10 & 11(23H2) Compatible ‚Äî Support most Windows builds",
          "‚úì Self-Service HWID Reset ‚Äî HWID reset quickly",
          "‚ö° Instant Delivery ‚Äî License key activation in seconds"
        ],
        aimbot: [
          "‚úì Enable/Disable Aimbot ‚Äî Quick on/off toggle",
          "‚úì Visible Check ‚Äî Only targets seen opponents",
          "‚úì Recoil Control ‚Äî Helps stabilize aim",
          "‚úì Aimbone Select ‚Äî Choose target bone (e.g., head/chest)",
          "‚úì Draw FOV ‚Äî Display the aim radius on screen",
          "‚úì Smooth ‚Äî Adjust tracking smoothness",
          "‚úì FOV ‚Äî Set the targeting field of view"
        ],
        visual: [
          "‚úì Skeleton ‚Äî Overlay player bone structure",
          "‚úì Snapline ‚Äî Line from you to enemy",
          "‚úì Headbox ‚Äî Highlight head hitbox",
          "‚úì Healthbar ‚Äî Show current HP",
          "‚úì Distance ‚Äî Display range to target",
          "‚úì Agent ‚Äî Show character/agent name",
          "‚úì Weapon ‚Äî Show equipped weapon",
          "‚úì Enemy Chams ‚Äî Colored models for visibility",
          "‚úì Visible Check ‚Äî Only render when visible"
        ],
        misc: [
          "‚úì Unlock All ‚Äî Access all skins",
          "‚úì BHOP ‚Äî Auto bunny-hop movement",
          "‚úì FOV Changer ‚Äî Changed fov value",
          "‚úì Skip Tutorial ‚Äî Skip first time tutorial"
        ]
      }
    },
    {
      id: 2,
      name: "PUBG Mobile Premium",
      game: "PUBG MOBILE",
      price: 100000,
      image: "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400&h=250&fit=crop",
      badge: "Instant Delivery",
      rating: 4.8,
      description: "Dominate the battlefield with advanced ESP and aimbot features. Optimized for mobile gameplay with low resource usage.",
      screenshots: [
        "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=800&h=450&fit=crop",
        "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=800&h=450&fit=crop"
      ],
      durations: [
        { label: "1 Day", desc: "[1 Day License]", days: 1, price: 30000 },
        { label: "3 Days", desc: "[3 Days License]", days: 3, price: 70000 },
        { label: "1 Week", desc: "[7 Days License]", days: 7, price: 100000 },
        { label: "1 Month", desc: "[30 Days License]", days: 30, price: 300000 }
      ],
      features: {
        benefits: [
          "‚úì Mobile Optimized ‚Äî Smooth performance",
          "‚úì Anti-Ban Protection ‚Äî Stay safe",
          "‚úì Regular Updates ‚Äî Always working"
        ],
        aimbot: [
          "‚úì Auto Aim ‚Äî Automatic targeting",
          "‚úì Target Lock ‚Äî Lock onto enemies",
          "‚úì Recoil Reduction ‚Äî Stabilize weapons"
        ],
        visual: [
          "‚úì Player ESP ‚Äî See all players",
          "‚úì Item ESP ‚Äî Find loot easily",
          "‚úì Vehicle ESP ‚Äî Locate vehicles"
        ],
        misc: [
          "‚úì Speed Hack ‚Äî Move faster",
          "‚úì Jump Hack ‚Äî Jump higher",
          "‚úì No Grass ‚Äî Better visibility"
        ]
      }
    },
    {
      id: 3,
      name: "CS2 External",
      game: "CS2 EXTERNAL",
      price: 200000,
      image: "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=400&h=250&fit=crop",
      badge: "Instant Delivery",
      rating: 4.9,
      description: "Professional-grade external cheat for CS2. Advanced triggerbot and ESP with zero FPS impact.",
      screenshots: [
        "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=800&h=450&fit=crop",
        "https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=800&h=450&fit=crop"
      ],
      durations: [
        { label: "1 Day", desc: "[1 Day License]", days: 1, price: 60000 },
        { label: "3 Days", desc: "[3 Days License]", days: 3, price: 120000 },
        { label: "1 Week", desc: "[7 Days License]", days: 7, price: 200000 },
        { label: "1 Month", desc: "[30 Days License]", days: 30, price: 500000 }
      ],
      features: {
        benefits: [
          "‚úì External Process ‚Äî Extra safe",
          "‚úì VAC Undetected ‚Äî Tested daily",
          "‚úì Zero FPS Impact ‚Äî Smooth gameplay"
        ],
        aimbot: [
          "‚úì Triggerbot ‚Äî Auto shoot on target",
          "‚úì RCS ‚Äî Recoil Control System",
          "‚úì Smooth Aim ‚Äî Natural movements"
        ],
        visual: [
          "‚úì Box ESP ‚Äî Player boxes",
          "‚úì Health ESP ‚Äî HP bars",
          "‚úì Weapon ESP ‚Äî See weapons"
        ],
        misc: [
          "‚úì Bunny Hop ‚Äî Auto bhop",
          "‚úì Radar Hack ‚Äî Minimap ESP",
          "‚úì Rank Reveal ‚Äî Show ranks"
        ]
      }
    },
    {
      id: 4,
      name: "Free Fire VIP",
      game: "FREE FIRE VIP",
      price: 80000,
      image: "https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=400&h=250&fit=crop",
      badge: "Instant Delivery",
      rating: 4.7,
      description: "Complete Free Fire enhancement suite with aimbot, wallhack, and more.",
      screenshots: [
        "https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=800&h=450&fit=crop"
      ],
      durations: [
        { label: "1 Day", desc: "[1 Day License]", days: 1, price: 25000 },
        { label: "3 Days", desc: "[3 Days License]", days: 3, price: 50000 },
        { label: "1 Week", desc: "[7 Days License]", days: 7, price: 80000 },
        { label: "1 Month", desc: "[30 Days License]", days: 30, price: 250000 }
      ],
      features: {
        benefits: [
          "‚úì Easy to Use ‚Äî Simple interface",
          "‚úì Regular Updates ‚Äî Always working"
        ],
        aimbot: [
          "‚úì Auto Headshot ‚Äî Automatic headshots",
          "‚úì Lock Target ‚Äî Lock enemies"
        ],
        visual: [
          "‚úì Wallhack ‚Äî See through walls",
          "‚úì Player ESP ‚Äî All player info"
        ],
        misc: [
          "‚úì Anti Ban ‚Äî Stay protected",
          "‚úì Teleport ‚Äî Move instantly"
        ]
      }
    },
    {
      id: 5,
      name: "Apex External",
      game: "APEX LEGENDS",
      price: 180000,
      image: "https://images.unsplash.com/photo-1560419015-7c427e8ae5ba?w=400&h=250&fit=crop",
      badge: "Instant Delivery",
      rating: 4.8,
      description: "Advanced Apex Legends external with prediction aimbot and ESP features.",
      screenshots: [
        "https://images.unsplash.com/photo-1560419015-7c427e8ae5ba?w=800&h=450&fit=crop"
      ],
      durations: [
        { label: "1 Day", desc: "[1 Day License]", days: 1, price: 55000 },
        { label: "3 Days", desc: "[3 Days License]", days: 3, price: 110000 },
        { label: "1 Week", desc: "[7 Days License]", days: 7, price: 180000 },
        { label: "1 Month", desc: "[30 Days License]", days: 30, price: 450000 }
      ],
      features: {
        benefits: [
          "‚úì Prediction Aimbot ‚Äî Lead targets",
          "‚úì EAC Safe ‚Äî Undetected"
        ],
        aimbot: [
          "‚úì Prediction ‚Äî Bullet prediction",
          "‚úì Visibility Check ‚Äî Smart aim"
        ],
        visual: [
          "‚úì Legend ESP ‚Äî Character info",
          "‚úì Loot ESP ‚Äî Find items"
        ],
        misc: [
          "‚úì No Recoil ‚Äî Zero recoil",
          "‚úì Spectator List ‚Äî See watchers"
        ]
      }
    },
    {
      id: 6,
      name: "COD Warzone Tool",
      game: "COD WARZONE",
      price: 220000,
      image: "https://images.unsplash.com/photo-1593305841991-05c297ba4575?w=800&h=450&fit=crop",
      badge: "Instant Delivery",
      rating: 4.9,
      description: "Premium Warzone tool with advanced aimbot and radar features.",
      screenshots: [
        "https://images.unsplash.com/photo-1593305841991-05c297ba4575?w=800&h=450&fit=crop"
      ],
      durations: [
        { label: "1 Day", desc: "[1 Day License]", days: 1, price: 70000 },
        { label: "3 Days", desc: "[3 Days License]", days: 3, price: 140000 },
        { label: "1 Week", desc: "[7 Days License]", days: 7, price: 220000 },
        { label: "1 Month", desc: "[30 Days License]", days: 30, price: 550000 }
      ],
      features: {
        benefits: [
          "‚úì Ricochet Safe ‚Äî Bypass anti-cheat",
          "‚úì Stream Proof ‚Äî Safe for streaming"
        ],
        aimbot: [
          "‚úì Silent Aim ‚Äî Invisible aimbot",
          "‚úì Magic Bullet ‚Äî Hit anywhere"
        ],
        visual: [
          "‚úì Radar ‚Äî 2D radar overlay",
          "‚úì UAV ‚Äî Permanent UAV"
        ],
        misc: [
          "‚úì No Recoil ‚Äî Perfect spray",
          "‚úì No Spread ‚Äî Accurate shots"
        ]
      }
    }
  ];

  const addToCart = (product, duration) => {
    const cartItem = {
      ...product,
      duration: duration,
      price: duration.price,
      displayName: `${product.name} - ${duration.label}`
    };
    
    const existing = cart.find(item => item.id === product.id && item.duration.days === duration.days);
    if (existing) {
      setCart(cart.map(item => 
        item.id === product.id && item.duration.days === duration.days 
          ? {...item, quantity: item.quantity + 1} 
          : item
      ));
    } else {
      setCart([...cart, {...cartItem, quantity: 1}]);
    }
  };

  const removeFromCart = (productId, durationDays) => {
    setCart(cart.filter(item => !(item.id === productId && item.duration.days === durationDays)));
  };

  const updateQuantity = (productId, durationDays, change) => {
    setCart(cart.map(item => {
      if (item.id === productId && item.duration.days === durationDays) {
        const newQuantity = item.quantity + change;
        return newQuantity > 0 ? {...item, quantity: newQuantity} : item;
      }
      return item;
    }).filter(item => item.quantity > 0));
  };

  const getTotalPrice = () => {
    return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
  };

  const openProductModal = (product) => {
    setSelectedProduct(product);
    setSelectedDuration(product.durations[0]);
    setCurrentScreenshot(0);
  };

  const closeProductModal = () => {
    setSelectedProduct(null);
    setSelectedDuration(null);
    setCurrentScreenshot(0);
  };

  const nextScreenshot = () => {
    if (selectedProduct) {
      setCurrentScreenshot((prev) => 
        prev === selectedProduct.screenshots.length - 1 ? 0 : prev + 1
      );
    }
  };

  const prevScreenshot = () => {
    if (selectedProduct) {
      setCurrentScreenshot((prev) => 
        prev === 0 ? selectedProduct.screenshots.length - 1 : prev - 1
      );
    }
  };

  return (
    <div className="min-h-screen bg-black text-white">
      {/* Header */}
      <header className="sticky top-0 z-40 bg-black/95 backdrop-blur-md border-b border-gray-900">
        <div className="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
          <div className="flex items-center gap-2">
            <span className="text-2xl">üéÆ</span>
            <h1 className="text-xl font-bold tracking-tight">MARGA2HIGH</h1>
          </div>
          <div className="flex items-center gap-8">
            <a href="#" className="text-sm text-gray-400 hover:text-white transition">Terms</a>
            <a href="#" className="text-sm text-gray-400 hover:text-white transition">Reviews</a>
            <button 
              onClick={() => setShowCart(true)}
              className="relative"
            >
              <ShoppingCart className="w-5 h-5 text-gray-400 hover:text-white transition" />
              {cart.length > 0 && (
                <span className="absolute -top-2 -right-2 bg-red-600 text-xs w-4 h-4 rounded-full flex items-center justify-center text-white font-bold">
                  {cart.length}
                </span>
              )}
            </button>
            <button className="bg-red-600 hover:bg-red-700 px-5 py-2 rounded-lg text-sm font-semibold transition flex items-center gap-2">
              <User className="w-4 h-4" />
              Customer Login
            </button>
          </div>
        </div>
      </header>

      {/* Hero Section */}
      <section className="relative overflow-hidden bg-gradient-to-b from-gray-900/50 to-black py-20">
        <div className="max-w-7xl mx-auto px-6">
          <div className="max-w-3xl">
            <div className="flex items-center gap-2 mb-4 text-red-500">
              <CheckCircle className="w-4 h-4" />
              <span className="text-xs font-semibold uppercase tracking-wide">Trusted by 1200+ customers</span>
            </div>
            
            <h1 className="text-5xl font-bold mb-4 leading-tight">
              MARGA2HIGH
            </h1>
            
            <p className="text-lg text-gray-400 mb-8 max-w-xl">
              Premium products, clean design, and a checkout that just works.
            </p>
            
            <div className="flex gap-3">
              <button 
                onClick={() => document.getElementById('products').scrollIntoView({ behavior: 'smooth' })}
                className="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-semibold text-sm transition flex items-center gap-2"
              >
                <ShoppingCart className="w-4 h-4" />
                Shop Best Sellers
              </button>
              <button className="bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-lg font-semibold text-sm transition">
                Join Discord
              </button>
            </div>
            
            <div className="flex items-center gap-2 text-yellow-500 mt-6">
              <Star className="w-4 h-4 fill-current" />
              <span className="text-sm font-semibold">4.97/5 average rating</span>
            </div>
          </div>
        </div>
      </section>

      {/* Features Section */}
      <section className="max-w-7xl mx-auto px-6 py-12">
        <div className="grid grid-cols-4 gap-4">
          <div className="bg-gray-900/50 p-5 rounded-xl border border-gray-800">
            <Zap className="w-8 h-8 mb-3 text-red-500" />
            <h3 className="font-semibold text-sm mb-1">Instant delivery</h3>
            <p className="text-xs text-gray-500">No waiting time</p>
          </div>
          
          <div className="bg-gray-900/50 p-5 rounded-xl border border-gray-800">
            <Lock className="w-8 h-8 mb-3 text-red-500" />
            <h3 className="font-semibold text-sm mb-1">Secure checkout</h3>
            <p className="text-xs text-gray-500">256-bit encryption</p>
          </div>
          
          <div className="bg-gray-900/50 p-5 rounded-xl border border-gray-800">
            <CheckCircle className="w-8 h-8 mb-3 text-red-500" />
            <h3 className="font-semibold text-sm mb-1">100% Success Rate</h3>
            <p className="text-xs text-gray-500">Works as promised</p>
          </div>
          
          <div className="bg-gray-900/50 p-5 rounded-xl border border-gray-800">
            <Shield className="w-8 h-8 mb-3 text-red-500" />
            <h3 className="font-semibold text-sm mb-1">Top-rated support</h3>
            <p className="text-xs text-gray-500">We've got your back</p>
          </div>
        </div>
      </section>

      {/* Products Section */}
      <section id="products" className="max-w-7xl mx-auto px-6 py-12">
        <div className="text-center mb-3">
          <span className="text-red-500 text-xs font-bold uppercase tracking-wider">Best Seller</span>
        </div>
        <h2 className="text-3xl font-bold text-center mb-2">Best Seller Products</h2>
        <p className="text-center text-gray-500 text-sm mb-10">Products that are loved by our customers - {products.length} items</p>
        
        <div className="grid grid-cols-3 gap-5">
          {products.map((product) => (
            <div 
              key={product.id}
              className="group relative bg-gradient-to-b from-gray-900 to-black rounded-xl overflow-hidden border border-gray-800 hover:border-red-500/50 transition-all hover:scale-[1.02]"
            >
              <div className="absolute top-3 right-3 z-10 bg-red-600/90 backdrop-blur px-2.5 py-1 rounded-full text-[10px] font-bold flex items-center gap-1">
                <Zap className="w-3 h-3" />
                {product.badge}
              </div>

              <div className="relative h-44 overflow-hidden">
                <div className="absolute inset-0 bg-gradient-to-br from-red-600/20 via-transparent to-transparent z-10" />
                <img 
                  src={product.image} 
                  alt={product.name}
                  className="w-full h-full object-cover opacity-70 group-hover:scale-110 transition-transform duration-700"
                />
                <div className="absolute bottom-3 left-4 z-20">
                  <div className="text-[10px] text-red-400 font-bold mb-0.5 uppercase tracking-wide">{product.game}</div>
                  <div className="text-xl font-bold">
                    <span className="text-red-500">MARGA</span><span className="text-white">2HIGH</span>
                  </div>
                </div>
              </div>

              <div className="p-4">
                <div className="flex items-center gap-2 mb-3 text-xs text-gray-500">
                  <span className="flex items-center gap-1">
                    <span>üíª</span> Intel
                  </span>
                  <span className="flex items-center gap-1">
                    <span>‚ö°</span> AMD
                  </span>
                </div>
                
                <h3 className="text-base font-bold mb-4">{product.name}</h3>
                
                <div className="flex justify-between items-center">
                  <div>
                    <div className="text-[10px] text-gray-500 uppercase tracking-wide mb-0.5">Starting at</div>
                    <div className="text-xl font-bold text-red-500">
                      Rp{(product.durations[0].price / 1000).toFixed(0)}K
                    </div>
                  </div>
                  <button 
                    onClick={() => openProductModal(product)}
                    className="bg-red-600 hover:bg-red-700 px-5 py-2.5 rounded-lg text-sm font-bold transition flex items-center gap-2"
                  >
                    <ShoppingCart className="w-4 h-4" />
                    Buy Now
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Product Detail Modal */}
      {selectedProduct && (
        <div className="fixed inset-0 z-50 flex items-start justify-center p-4 overflow-y-auto">
          <div 
            className="absolute inset-0 bg-black/90 backdrop-blur-sm"
            onClick={closeProductModal}
          />
          <div className="relative bg-black rounded-xl border border-gray-800 w-full max-w-6xl my-8">
            <button 
              onClick={closeProductModal}
              className="absolute top-4 right-4 z-10 hover:text-red-500 transition bg-gray-900/50 p-2 rounded-lg"
            >
              <X className="w-5 h-5" />
            </button>

            <div className="grid grid-cols-2 gap-6 p-6">
              {/* Left Side - Screenshots */}
              <div>
                <div className="relative rounded-lg overflow-hidden mb-4 bg-gray-900">
                  <img 
                    src={selectedProduct.screenshots[currentScreenshot]}
                    alt="Screenshot"
                    className="w-full h-96 object-cover"
                  />
                  {selectedProduct.screenshots.length > 1 && (
                    <>
                      <button 
                        onClick={prevScreenshot}
                        className="absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 p-2 rounded-full transition"
                      >
                        <ChevronLeft className="w-5 h-5" />
                      </button>
                      <button 
                        onClick={nextScreenshot}
                        className="absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 p-2 rounded-full transition"
                      >
                        <ChevronRight className="w-5 h-5" />
                      </button>
                    </>
                  )}
                </div>

                <div className="flex gap-2 overflow-x-auto">
                  {selectedProduct.screenshots.map((screenshot, idx) => (
                    <button
                      key={idx}
                      onClick={() => setCurrentScreenshot(idx)}
                      className={`flex-shrink-0 rounded-lg overflow-hidden border-2 transition ${
                        currentScreenshot === idx ? 'border-red-500' : 'border-gray-800'
                      }`}
                    >
                      <img 
                        src={screenshot}
                        alt={`Thumbnail ${idx + 1}`}
                        className="w-24 h-16 object-cover"
                      />
                    </button>
                  ))}
                </div>

                <div className="mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-800">
                  <div className="flex items-center gap-2 mb-2">
                    <span className="text-2xl">üéÆ</span>
                    <h3 className="text-lg font-bold">MARGA2HIGH</h3>
                  </div>
                  <div className="flex items-center gap-2 mb-2">
                    {[...Array(5)].map((_, i) => (
                      <Star key={i} className="w-4 h-4 fill-yellow-500 text-yellow-500" />
                    ))}
                    <span className="text-sm text-gray-400">{selectedProduct.rating}/5</span>
                  </div>
                  <div className="flex items-center gap-2 text-xs text-gray-500 mb-3">
                    <span className="flex items-center gap-1">
                      <span>üíª</span> Intel
                    </span>
                    <span>‚Ä¢</span>
                    <span className="flex items-center gap-1">
                      <span>‚ö°</span> AMD
                    </span>
                  </div>
                </div>
              </div>

              {/* Right Side - Product Info */}
              <div className="overflow-y-auto max-h-[calc(100vh-8rem)]">
                <h2 className="text-2xl font-bold mb-2">{selectedProduct.name}</h2>
                <div className="flex items-center gap-2 mb-4">
                  {[...Array(5)].map((_, i) => (
                    <Star key={i} className="w-4 h-4 fill-yellow-500 text-yellow-500" />
                  ))}
                </div>

                <p className="text-gray-400 text-sm mb-6">{selectedProduct.description}</p>

                {/* Variants */}
                <div className="mb-6">
                  <h3 className="text-sm font-semibold mb-3">Variants:</h3>
                  <div className="space-y-2">
                    {selectedProduct.durations.map((duration) => (
                      <button
                        key={duration.days}
                        onClick={() => !duration.disabled && setSelectedDuration(duration)}
                        disabled={duration.disabled}
                        className={`w-full p-4 rounded-lg border-2 transition text-left ${
                          duration.disabled 
                            ? 'border-gray-800 bg-gray-900/30 opacity-50 cursor-not-allowed'
                            : selectedDuration?.days === duration.days
                            ? 'border-red-500 bg-red-500/10'
                            : 'border-gray-800 bg-gray-900/50 hover:border-gray-700'
                        }`}
                      >
                        <div className="flex justify-between items-center">
                          <div>
                            <div className="font-semibold mb-1">{duration.label}</div>
                            <div className="text-xs text-gray-500">{duration.desc}</div>
                          </div>
                          <div className="text-right">
                            <div className="text-lg font-bold text-red-500">
                              Rp{(duration.price / 1000).toFixed(0)}K
                            </div>
                            {duration.disabled && (
                              <div className="text-xs text-red-500">Purchase Disabled ¬∑ not now</div>
                            )}
                          </div>
                        </div>
                      </button>
                    ))}
                  </div>
                </div>

                {/* Add to Cart Button */}
                <button
                  onClick={() => {
                    if (selectedDuration && !selectedDuration.disabled) {
                      addToCart(selectedProduct, selectedDuration);
                      closeProductModal();
                      setShowCart(true);
                    }
                  }}
                  disabled={!selectedDuration || selectedDuration.disabled}
                  className="w-full bg-cyan-500 hover:bg-cyan-600 disabled:bg-gray-700 disabled:cursor-not-allowed py-3 rounded-lg font-bold transition mb-6"
                >
                  Add to Cart
                </button>

                {/* Description */}
                <div className="mb-6">
                  <h3 className="text-lg font-bold mb-3 flex items-center gap-2">
                    <span className="text-blue-500">üíé</span> Key Benefits
                  </h3>
                  <div className="space-y-2">
                    {selectedProduct.features.benefits.map((benefit, idx) => (
                      <div key={idx} className="text-sm text-gray-300 flex items-start gap-2">
                        <span className="text-green-500 mt-0.5">‚Ä¢</span>
                        <span>{benefit}</span>
                      </div>
                    ))}
                  </div>
                </div>

                {/* AIMBOT FEATURES */}
                <div className="mb-6">
                  <h3 className="text-lg font-bold mb-3 flex items-center gap-2">
                    <span className="text-red-500">üéØ</span> AIMBOT FEATURES
                  </h3>
                  <div className="space-y-2">
                    {selectedProduct.features.aimbot.map((feature, idx) => (
                      <div key={idx} className="text-sm text-gray-300 flex items-start gap-2">
                        <span className="text-green-500 mt-0.5">‚úì</span>
                        <span>{feature}</span>
                      </div>
                    ))}
                  </div>
                </div>

                {/* VISUAL FEATURES */}
                <div className="mb-6">
                  <h3 className="text-lg font-bold mb-3 flex items-center gap-2">
                    <span>üëÅÔ∏è</span> VISUAL FEATURES (ESP)
                  </h3>
                  <div className="space-y-2">
                    {selectedProduct.features.visual.map((feature, idx) => (
                      <div key={idx} className="text-sm text-gray-300 flex items-start gap-2">
                        <span className="text-green-500 mt-0.5">‚úì</span>
                        <span>{feature}</span>
                      </div>
                    ))}
                  </div>
                </div>

                {/* MISC */}
                <div className="mb-6">
                  <h3 className="text-lg font-bold mb-3 flex items-center gap-2">
                    <span className="text-red-500">üéÆ</span> MISC
                  </h3>
                  <div className="space-y-2">
                    {selectedProduct.features.misc.map((feature, idx) => (
                      <div key={idx} className="text-sm text-gray-300 flex items-start gap-2">
                        <span className="text-green-500 mt-0.5">‚úì</span>
                        <span>{feature}</span>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Cart Sidebar */}
      {showCart && (
        <div className="fixed inset-0 z-50 flex justify-end">
          <div 
            className="absolute inset-0 bg-black/80 backdrop-blur-sm"
            onClick={() => setShowCart(false)}
          />
          <div className="relative w-full max-w-md bg-black h-full overflow-y-auto border-l border-gray-800">
            <div className="sticky top-0 bg-black/95 backdrop-blur p-5 border-b border-gray-800 flex justify-between items-center">
              <h2 className="text-xl font-bold">Shopping Cart</h2>
              <button onClick={() => setShowCart(false)} className="hover:text-red-500 transition">
                <X className="w-5 h-5" />
              </button>
            </div>
            
            <div className="p-5">
              {cart.length === 0 ? (
                <div className="text-center py-16">
                  <ShoppingCart className="w-12 h-12 mx-auto mb-3 text-gray-700" />
                  <p className="text-gray-500 text-sm">Your cart is empty</p>
                </div>
              ) : (
                <>
                  {cart.map((item, index) => (
                    <div key={`${item.id}-${item.duration.days}-${index}`} className="mb-3 p-4 bg-gray-900/50 rounded-lg border border-gray-800">
                      <div className="flex justify-between mb-2">
                        <div>
                          <h3 className="font-semibold text-sm">{item.displayName}</h3>
                          <p className="text-xs text-gray-500">{item.game}</p>
                        </div>
                        <button 
                          onClick={() => removeFromCart(item.id, item.duration.days)}
                          className="text-gray-500 hover:text-red-500 transition"
                        >
                          <X className="w-4 h-4" />
                        </button>
                      </div>
                      <div className="flex justify-between items-center">
                        <span className="text-red-500 font-bold text-sm">
                          Rp {item.price.toLocaleString('id-ID')}
                        </span>
                        <div className="flex items-center gap-2">
                          <button 
                            onClick={() => updateQuantity(item.id, item.duration.days, -1)}
                            className="bg-gray-800 hover:bg-gray-700 w-7 h-7 rounded flex items-center justify-center"
                          >
                            <Minus className="w-3 h-3" />
                          </button>
                          <span className="w-6 text-center text-sm font-semibold">{item.quantity}</span>
                          <button 
                            onClick={() => updateQuantity(item.id, item.duration.days, 1)}
                            className="bg-gray-800 hover:bg-gray-700 w-7 h-7 rounded flex items-center justify-center"
                          >
                            <Plus className="w-3 h-3" />
                          </button>
                        </div>
                      </div>
                    </div>
                  ))}
                  
                  <div className="mt-5 pt-4 border-t border-gray-800">
                    <div className="flex justify-between mb-4 text-lg font-bold">
                      <span>Total:</span>
                      <span className="text-red-500">Rp {getTotalPrice().toLocaleString('id-ID')}</span>
                    </div>
                    <button 
                      onClick={() => {
                        setShowCart(false);
                        setShowCheckout(true);
                      }}
                      className="w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg font-bold transition"
                    >
                      Proceed to Checkout
                    </button>
                  </div>
                </>
              )}
            </div>
          </div>
        </div>
      )}

      {/* Checkout Modal */}
      {showCheckout && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
          <div 
            className="absolute inset-0 bg-black/90 backdrop-blur-sm"
            onClick={() => setShowCheckout(false)}
          />
          <div className="relative bg-gradient-to-b from-gray-900 to-black rounded-xl p-6 max-w-md w-full border border-gray-800">
            <button 
              onClick={() => setShowCheckout(false)}
              className="absolute top-4 right-4 hover:text-red-500 transition"
            >
              <X className="w-5 h-5" />
            </button>
            
            <h2 className="text-2xl font-bold mb-5">Payment Method</h2>
            
            <div className="mb-5 p-4 bg-gray-900/50 rounded-lg border border-gray-800">
              <h3 className="font-semibold mb-3 text-sm">Order Summary:</h3>
              {cart.map((item, index) => (
                <div key={`checkout-${item.id}-${item.duration.days}-${index}`} className="flex justify-between text-xs mb-2">
                  <span className="text-gray-400">{item.displayName} x{item.quantity}</span>
                  <span className="font-semibold">Rp {(item.price * item.quantity).toLocaleString('id-ID')}</span>
                </div>
              ))}
              <div className="border-t border-gray-800 mt-3 pt-3 flex justify-between font-bold">
                <span>Total:</span>
                <span className="text-red-500">Rp {getTotalPrice().toLocaleString('id-ID')}</span>
              </div>
            </div>
            
            <div className="bg-gray-900/50 p-5 rounded-lg border border-gray-800 text-center">
              <h3 className="font-bold mb-3 text-sm">Scan QRIS Code</h3>
              <div className="bg-white p-3 rounded-lg inline-block mb-3">
                <img 
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/QR_code_for_mobile_English_Wikipedia.svg/330px-QR_code_for_mobile_English_Wikipedia.svg.png"
                  alt="QRIS Code"
                  className="w-40 h-40"
                />
              </div>
              <p className="text-xs text-gray-500 mb-1">
                Scan with your mobile banking app
              </p>
              <p className="text-[10px] text-gray-600">
                ‚ö° Instant delivery after payment
              </p>
            </div>
            
            <button 
              onClick={() => {
                alert('Payment confirmed! Check your email for delivery. Thank you! üéÆ');
                setShowCheckout(false);
                setCart([]);
              }}
              className="w-full mt-5 bg-green-600 hover:bg-green-700 py-3 rounded-lg font-bold transition"
            >
              ‚úì Confirm Payment
            </button>
          </div>
        </div>
      )}

      {/* Footer */}
      <footer className="bg-black border-t border-gray-900 py-10 mt-16">
        <div className="max-w-7xl mx-auto px-6 text-center">
          <div className="flex items-center justify-center gap-2 mb-3">
            <span className="text-2xl">üéÆ</span>
            <h3 className="text-lg font-bold">MARGA2HIGH</h3>
          </div>
          <p className="text-gray-500 text-sm mb-1">¬© 2024 MARGA2HIGH.TOOL - Premium Gaming Tools</p>
          <p className="text-xs text-gray-600">For educational purposes only</p>
        </div>
      </footer>
    </div>
  );
}
